<!DOCTYPE html>
<html lang="es" class="weatherApp">
<head>
    <meta charset="UTF-8">
    <title>Weather App</title>
    <link rel="stylesheet/less" type="text/css" href="css/weatherapp.less"/>
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/2.5.1/less.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="js/AccuWeather.js"></script>
</head>
<body>
<div id="forecastContainer">
    <div id="currentCity">
        <form action="" id="cityForm">
            <input type="text" id="cityName" class="cityInput" placeholder="Ciudad" autocomplete="off">
            <button class="cityInput" id="getCity"><i class="fa fa-search"></i></button>
        </form>
        <div id="todayForecast">
            <div class="todayInfo">
                <div class="todayInfoLeft">
                    <div class="dayTemperature">12.2º</div>
                    <div class="cityAndState">
                        <div class="cityName">Alcorcón</div>
                        <div class="stateName">Comunidad de Madrid</div>
                        <span class="favorite"><i class="fa fa-star-o"></i></span>
                    </div>
                    <div class="maxTminTHumidity">
                        <div class="tempMax">20º</div>
                        <div class="tempMin">17º</div>
                        <div class="humidity">Humedad: 48</div>
                    </div>
                </div>
                <div class="weatherContainer">
                    <div class="currentWeather weatherIcon weatherIcon-1"></div>
                </div>
            </div>
        </div>
        <div class="hourlyForecasts12 gradient-background">
            <div class="hourForeCast">
                <div class="hour hourForeCast-element"> 11 p. m.</div>
                <div class="hourWeather weatherIcon weatherIcon-1 hourForeCast-element"></div>
                <div class="hourlyTemperature hourForeCast-element">6º</div>
                <div class="temperatureGrpahic hourForeCast-element">
                    <div class="currentTemperatureHeight"></div>
                </div>
                <div class="hourlyPrecipitation">2% <i class="fa fa-tint"></i></div>
            </div>
            <div class="hourForeCast">
                <div class="hour hourForeCast-element"> 11 p. m.</div>
                <div class="hourWeather weatherIcon weatherIcon-1 hourForeCast-element"></div>
                <div class="hourlyTemperature hourForeCast-element">6º</div>
                <div class="temperatureGrpahic hourForeCast-element">
                    <div class="currentTemperatureHeight"></div>
                </div>
                <div class="hourlyPrecipitation">2% <i class="fa fa-tint"></i></div>
            </div>
            <div class="hourForeCast">
                <div class="hour hourForeCast-element"> 11 p. m.</div>
                <div class="hourWeather weatherIcon weatherIcon-1 hourForeCast-element"></div>
                <div class="hourlyTemperature hourForeCast-element">6º</div>
                <div class="temperatureGrpahic hourForeCast-element">
                    <div class="currentTemperatureHeight"></div>
                </div>
                <div class="hourlyPrecipitation">2% <i class="fa fa-tint"></i></div>
            </div>
            <div class="hourForeCast">
                <div class="hour hourForeCast-element"> 11 p. m.</div>
                <div class="hourWeather weatherIcon weatherIcon-1 hourForeCast-element"></div>
                <div class="hourlyTemperature hourForeCast-element">6º</div>
                <div class="temperatureGrpahic hourForeCast-element">
                    <div class="currentTemperatureHeight"></div>
                </div>
                <div class="hourlyPrecipitation">2% <i class="fa fa-tint"></i></div>
            </div>
            <div class="hourForeCast">
                <div class="hour hourForeCast-element"> 11 p. m.</div>
                <div class="hourWeather weatherIcon weatherIcon-1 hourForeCast-element"></div>
                <div class="hourlyTemperature hourForeCast-element">6º</div>
                <div class="temperatureGrpahic hourForeCast-element">
                    <div class="currentTemperatureHeight"></div>
                </div>
                <div class="hourlyPrecipitation">2% <i class="fa fa-tint"></i></div>
            </div>
            <div class="hourForeCast">
                <div class="hour hourForeCast-element"> 11 p. m.</div>
                <div class="hourWeather weatherIcon weatherIcon-1 hourForeCast-element"></div>
                <div class="hourlyTemperature hourForeCast-element">6º</div>
                <div class="temperatureGrpahic hourForeCast-element">
                    <div class="currentTemperatureHeight"></div>
                </div>
                <div class="hourlyPrecipitation">2% <i class="fa fa-tint"></i></div>
            </div>
            <div class="hourForeCast">
                <div class="hour hourForeCast-element"> 11 p. m.</div>
                <div class="hourWeather weatherIcon weatherIcon-1 hourForeCast-element"></div>
                <div class="hourlyTemperature hourForeCast-element">6º</div>
                <div class="temperatureGrpahic hourForeCast-element">
                    <div class="currentTemperatureHeight"></div>
                </div>
                <div class="hourlyPrecipitation">2% <i class="fa fa-tint"></i></div>
            </div>
        </div>
        <div class="weeklyForecasts gradient-background">
            <div class="dayForeCast">
                <div class="dayWeek">lunes</div>
                <div class="dayStats">
                    <div class="dailyPrecipitation">2% <i class="fa fa-tint"></i></div>
                    <div class="weatherDayNight">
                        <div class="dayWeather weatherIcon weatherIcon-1"></div>
                        <div class="nightWeather weatherIcon weatherIcon-33"></div>
                    </div>
                    <div class="maxTminT">
                        <div class="tempMax">12º</div>
                        <div class="tempMin">1º</div>
                    </div>
                </div>
            </div>
            <div class="dayForeCast">
                <div class="dayWeek">Hoy</div>
                <div class="dayStats">
                    <div class="dailyPrecipitation">2% <i class="fa fa-tint"></i></div>
                    <div class="weatherDayNight">
                        <div class="dayWeather weatherIcon weatherIcon-1"></div>
                        <div class="nightWeather weatherIcon weatherIcon-33"></div>
                    </div>
                    <div class="maxTminT">
                        <div class="tempMax">12º</div>
                        <div class="tempMin">1º</div>
                    </div>
                </div>
            </div>
            <div class="dayForeCast">
                <div class="dayWeek">martes</div>
                <div class="dayStats">
                    <div class="dailyPrecipitation">2% <i class="fa fa-tint"></i></div>
                    <div class="weatherDayNight">
                        <div class="dayWeather weatherIcon weatherIcon-1"></div>
                        <div class="nightWeather weatherIcon weatherIcon-33"></div>
                    </div>
                    <div class="maxTminT">
                        <div class="tempMax">12º</div>
                        <div class="tempMin">1º</div>
                    </div>
                </div>
            </div>
            <div class="dayForeCast">
                <div class="dayWeek">miércoles</div>
                <div class="dayStats">
                    <div class="dailyPrecipitation">2% <i class="fa fa-tint"></i></div>
                    <div class="weatherDayNight">
                        <div class="dayWeather weatherIcon weatherIcon-1"></div>
                        <div class="nightWeather weatherIcon weatherIcon-33"></div>
                    </div>
                    <div class="maxTminT">
                        <div class="tempMax">12º</div>
                        <div class="tempMin">1º</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div id="cityList">
        <div class="cityInfo gradient-background">
            <div class="todayInfo">
                <div class="todayInfoLeft">
                    <div class="dayTemperature">12.2º</div>
                    <div class="cityAndState">
                        <div class="cityName">Alcorcón</div>
                        <div class="stateName">Comunidad de Madrid</div>
                        <span class="favorite selected"><i class="fa fa-star"></i></span>
                    </div>
                    <div class="maxTminTHumidity">
                        <div class="tempMax">20º</div>
                        <div class="tempMin">17º</div>
                        <div class="humidity">Humedad: 48</div>
                    </div>
                </div>
                <div class="currentWeather weatherIcon weatherIcon-1"></div>
            </div>
            <div class="nextDays">
                <div class="oneDayAfter">
                    <div class="weatherIcon weatherIcon-1"></div>
                    <div class="dayAfterInfo">
                        <div class="weekDay">Viernes</div>
                        <div class="nextDaysTemperatures">
                            <div class="tempMax">20º</div>
                            <div class="tempMin">17º</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script type="module" src="js/registerServiceWorker.js"></script>
<script>
    $(document).ready(function () {
        let weather = AccuWeather.getInstance();
        const form = document.querySelector("#getCity");
        city = null;
        form.addEventListener("submit", e => {
            e.preventDefault();
            let cityName = $('#cityName')[0].value;
            form.reset();
            $('#cityName').focus();
            debugger;
            weather.getWeatherCiy(cityName, true)
                .then(data => {
                    city = data;
                    console.log(data)
                    $('.listadoCiudades').append(`<li>En ${cityName} es ${data.IsDayTime ? 'de día' : 'de noche'},
                    está ${data.WeatherText} y hace una temperatura de ${data.ApparentTemperature.Metric.Value}
                    ${data.ApparentTemperature.Metric.Unit}</li>`);
                })
                .catch(error => console.log(error));
        });
    });
</script>
</body>
</html>